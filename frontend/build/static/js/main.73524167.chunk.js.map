{"version":3,"sources":["context/authContext.js","hooks/httpHook.js","pageRouters/loginPage.js","pageRouters/authpage.js","pageRouters/components/UserList.js","pageRouters/tablePage.js","hooks/authHook.js","App.js","routers.js","reportWebVitals.js","index.js"],"names":["authContext","createContext","token","id","login","logout","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","console","log","JSON","stringify","fetch","response","json","data","ok","status","Error","message","clearError","LoginPage","password","form","setForm","context","useContext","changeHandler","event","target","name","value","loginHandler","className","type","onChange","aria-describedby","disabled","onClick","href","RegPage","email","history","useHistory","registerHandler","push","UserList","props","setStatus","makeListOf","blockedId","i","length","blocked","useEffect","users","map","user","style","toolbar","display","alignItems","marginBottom","btn","marginRight","window","location","reload","unblockedId","deleteId","scope","checked","idx","regData","lastLogin","MainPage","userData","setData","then","answer","setTimeout","fetchdata","storage","App","setToken","setId","jwtToken","userId","localStorage","setItem","removeItem","parse","getItem","useAuth","Route","path","component","exact","to","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73524167.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nexport const authContext = createContext({token:null, id:null, login:()=>{}, logout:()=>{}})","import { useCallback, useState } from \"react\";\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false); // will be removed with other loadings\r\n  const [error, setError] = useState(null); // probbably will be removed too\r\n\r\n  const request = useCallback(\r\n    async (url, method = \"GET\", body = null, headers = {}) => {\r\n      setLoading(true);\r\n      try {\r\n        console.log(body);\r\n        if (body) {\r\n          body = JSON.stringify(body);\r\n          headers[\"Content-Type\"] = \"application/json\";\r\n        }\r\n        const response = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n        });\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          console.log(\"!response.ok\", response.status);\r\n          throw new Error(data.message);\r\n        }\r\n        console.log(\"Seems to be good...\");\r\n        setLoading(false);\r\n        return data;\r\n      } catch (err) {\r\n        setLoading(false);\r\n        console.log(\"Well we catch an error\");\r\n        setError(err.message);\r\n        throw err;\r\n      }\r\n    },\r\n    []\r\n  );\r\n  const clearError = () => setError(null);\r\n  return { loading, request, error, clearError };\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { authContext } from \"../context/authContext\";\r\nimport { useHttp } from \"../hooks/httpHook\";\r\n\r\nexport const LoginPage = () => {\r\n  const {loading, request, error} = useHttp();\r\n  const [form, setForm] = useState({\r\n    login: \"\",\r\n    password: \"\",\r\n  });\r\n  const context = useContext(authContext);\r\n\r\n  const changeHandler = (event) => {\r\n    setForm({ ...form, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request(\"/auth/login/\", \"POST\", { ...form });\r\n      console.log(\"Data: \", data);\r\n      console.log(\"Login with this id and token\", data.token, data.id)\r\n      context.login(data.token, data.id)\r\n    } catch (err) {\r\n      console.log(\"Error in login page\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <div className=\"headerLogo\">Login Page</div>\r\n      </div>\r\n      <div className=\"form-wrapper\">\r\n        <form>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"form-group col-lg-5\">\r\n              <label>Login: </label>\r\n              <input\r\n                name=\"login\"\r\n                type=\"text\"\r\n                onChange={changeHandler}\r\n                className=\"form-control\"\r\n                id=\"login\"\r\n                aria-describedby=\"login\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"form-group col-lg-5\">\r\n              <label name=\"password\">Password: </label>\r\n              <input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"password\"\r\n                onChange={changeHandler}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row justify-content-center mt-1\">\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              disabled={loading}\r\n              onClick={loginHandler}\r\n            >\r\n              Submit\r\n            </button>\r\n            <div className=\"regLink\">\r\n              <a href=\"/register\">Register</a>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useHttp } from \"../hooks/httpHook\";\r\n\r\nexport const RegPage = () => {\r\n  const { loading, request, error}  = useHttp();\r\n  const [form, setForm] = useState({\r\n    login: \"\",\r\n    password: \"\",\r\n    email: \"\",\r\n  })\r\n  const history = useHistory();\r\n\r\n\r\n  const changeHandler = (event) => {\r\n    setForm({ ...form, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request(\"/auth/register\", \"POST\", { ...form });\r\n      console.log(\"Data :\", data);\r\n      history.push(\"/login\");\r\n    } catch (err) {\r\n      console.log(\"Error in register\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <div className=\"headerLogo\">Registration Page</div>\r\n      </div>\r\n      <div className=\"form-wrapper\">\r\n        <form>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"form-group col-lg-5\">\r\n              <label name=\"login\">Login: </label>\r\n              <input\r\n                name=\"login\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"login\"\r\n                aria-describedby=\"login\"\r\n                onChange={changeHandler}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"form-group col-lg-5\">\r\n              <label name=\"password\">Password: </label>\r\n              <input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"password\"\r\n                onChange={changeHandler}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"form-group col-lg-5\">\r\n              <label name=\"email\">Email: </label>\r\n              <input\r\n                name=\"email\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"email\"\r\n                onChange={changeHandler}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row justify-content-center mt-1\">\r\n            <button\r\n              type=\"submit\"\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHttp } from \"../../hooks/httpHook\";\r\n\r\nfunction UserList(props) {\r\n  const [status, setStatus] = useState([]);\r\n  const { request} = useHttp();\r\n\r\n  useEffect(() => {\r\n    setStatus(\r\n      props.users.map(user=>{\r\n        return {id:user.id, blocked:false};\r\n      })\r\n    )\r\n  }, [props.users])\r\n\r\n  function makeListOf(){\r\n    let blockedId = [];\r\n    for (let i = 0; i < status.length; i ++){\r\n      if (status[i].blocked){\r\n        blockedId.push(status[i].id);\r\n      }\r\n    }\r\n    return blockedId;\r\n  }\r\n\r\n  function blockHandler(){\r\n    let blockedId = makeListOf();\r\n    request('/table/changest', 'PUT', {status:true, id:blockedId});\r\n    window.location.reload(false);\r\n  }\r\n\r\n  function unblockHandler(){\r\n    let unblockedId = makeListOf();\r\n    request('/table/changest', 'PUT', {status:false, id:unblockedId});\r\n    window.location.reload(false);\r\n  }\r\n\r\n  function deleteHandler(){\r\n    let deleteId = makeListOf();\r\n    request('/table/changest/', 'DELETE', {id:deleteId});\r\n    window.location.reload(false);\r\n  }\r\n\r\n  const style = {\r\n    toolbar: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      marginBottom: \"1rem\",\r\n    },\r\n    btn: {\r\n      marginRight: \"5px\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"toolbar justify-content-center\" style={style.toolbar}>\r\n        <button type=\"button\" className=\"btn btn-secondary\" style={style.btn} onClick={blockHandler}>\r\n          Block\r\n        </button>\r\n        <button type=\"button\" className=\"btn btn-success\" style={style.btn} onClick={unblockHandler}>\r\n          Unblock\r\n        </button>\r\n        <button type=\"button\" className=\"btn btn-danger\" style={style.btn} onClick={deleteHandler}>\r\n          Delete\r\n        </button>\r\n      </div>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">\r\n              <input\r\n                type=\"checkbox\"\r\n                onChange = {event => {\r\n                  setStatus(\r\n                    status.map(data => {\r\n                      data.blocked = event.target.checked;\r\n                      return data;\r\n                    })\r\n                  )\r\n                }}\r\n              ></input>\r\n            </th>\r\n            <th scope=\"col\">id</th>\r\n            <th scope=\"col\">Login</th>\r\n            <th scope=\"col\">Email</th>\r\n            <th scope=\"col\">Registration date</th>\r\n            <th scope=\"col\">Last Login</th>\r\n            <th scope=\"col\">Status</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {props.users.map((user, idx) => {\r\n            return (\r\n              <tr key={user.id}>\r\n                <td>\r\n                  <input\r\n                    type=\"checkbox\" onChange={event => {\r\n                      setStatus(\r\n                      status.map(data => {\r\n                        if (data.id === user.id){\r\n                          data.blocked = event.target.checked;\r\n                        }\r\n                        return data;\r\n                      })\r\n                    )}}\r\n                    checked={status.length > 0 ? status[idx].blocked : false}\r\n                  ></input>\r\n                </td>\r\n                <td>{user.id}</td>\r\n                <td>{user.login}</td>\r\n                <td>{user.email}</td>\r\n                <td>{user.regData}</td>\r\n                <td>{user.lastLogin}</td>\r\n                <td>{user.blocked ? \"Blocked\" : \"Free as a bird\"}</td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserList;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { authContext } from \"../context/authContext\";\r\nimport { useHttp } from \"../hooks/httpHook\";\r\nimport UserList from \"./components/UserList\";\r\n\r\nexport const MainPage = () => {\r\n  const [userData, setData] = useState([]);\r\n  const context = useContext(authContext);\r\n  const {request} = useHttp();\r\n\r\n  useEffect(() => {\r\n\r\n    let fetchdata = async() =>{\r\n      console.log(\"Only one?\", context.id)\r\n      let reqdata = await request('/table', 'PUT', {id:context.id})\r\n      if (!reqdata.blocked){\r\n        fetch(\"/table\")\r\n        .then((answer) => answer.json())\r\n        .then((data) => {\r\n          setTimeout(() => {\r\n            setData(data);\r\n          }, 100);\r\n        });\r\n      } else {\r\n        context.logout();\r\n      }\r\n    }\r\n    fetchdata();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <div className=\"headerLogo\">List of Registered Users</div>\r\n        <UserList users={userData} />\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { useCallback, useEffect, useState } from \"react\"\r\nconst storage = 'storage';\r\nexport const useAuth = () =>{\r\n    const [token, setToken] = useState(null);\r\n    const [id, setId] = useState(null);\r\n\r\n    const login = useCallback((jwtToken, userId)=>{\r\n        console.log(\"INIT CALLBACK: \", jwtToken, userId)\r\n        setToken(jwtToken);\r\n        setId(userId);\r\n        console.log(\"OUR TOKEN AND ID IN STATE: \", token, id);\r\n        localStorage.setItem(storage, JSON.stringify({userId:userId, token:jwtToken}));\r\n    }, [token, id])\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null);\r\n        setId(null);\r\n        localStorage.removeItem(storage);\r\n    }, [])\r\n\r\n    useEffect(() =>{\r\n        const data = JSON.parse(localStorage.getItem(storage));\r\n        if (data && data.token){\r\n            login(data.token, data.userId)\r\n        }\r\n    }, [])\r\n\r\n    console.log(\"BEFORE RETURN, TOKEN: \", token, \"ID: \", id)\r\n    return {login, logout, token, id}\r\n}\r\n\r\n","import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { toRoutes } from './routers';\nimport { useAuth } from './hooks/authHook';\nimport { authContext } from './context/authContext';\n\n\nfunction App() {\n  const {login, logout, token, id} = useAuth();\n  console.log(\"Token: \", token, \"Id: \",  id)\n  const Route = toRoutes(!!token);\n  return (\n    <authContext.Provider value={{token, id, login, logout}}>\n      <div className='container'>\n        {Route}\n      </div>  \n    </authContext.Provider>\n        )\n}   \nexport default App;\n","import React from 'react';\r\nimport {Switch, Route, Redirect} from 'react-router-dom';\r\nimport {LoginPage} from './pageRouters/loginPage';\r\nimport {RegPage} from './pageRouters/authpage';\r\nimport {MainPage} from './pageRouters/tablePage';\r\n\r\nexport const toRoutes = isAuth => {\r\n    if (isAuth) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/table\" component={MainPage} exact/>\r\n                <Redirect to=\"/table\" />\r\n            </Switch>\r\n        )\r\n    }\r\n    return (\r\n        <Switch>\r\n            <Route path='/login' component={LoginPage} exact />\r\n            <Route path='/register' component={RegPage} exact />\r\n            <Redirect to=\"/login\" />\r\n        </Switch>\r\n    )\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'; \nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter as Router} from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />      \n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}